{"version":3,"file":"static/js/movie-details-page.b3bc9cdf.chunk.js","mappings":"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","sources":["components/MovieDetails/MovieDetails.jsx","pages/MovieDetailsPage.jsx","hooks/useFetchMovieDetails.jsx","services/api.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { Link } from '@mui/material';\n\nexport const MovieDetails = ({\n  film: { poster_path, release_date, vote_average, genres, title, overview },\n  movieId,\n  backFrom,\n}) => {\n  const filmPoster = poster_path\n    ? `https://image.tmdb.org/t/p/original${poster_path}`\n    : 'https://upload.wikimedia.org/wikipedia/commons/archive/a/ac/20121003093557%21No_image_available.svg';\n\n  const releaseDate = release_date.slice(0, 4);\n  const userScore = vote_average.toFixed(1) * 10;\n  const genresList = genres.map(e => e.name).join(', ');\n\n  return (\n    <>\n      <div>\n        <img src={filmPoster} alt={title} width={300} height={450} />\n        <ul>\n          <>\n            <h1>\n              {title} ({releaseDate})\n            </h1>\n            <p>User Score: {userScore}%</p>\n          </>\n          <li>\n            <label>Overview</label>\n            <p>{overview}</p>\n          </li>\n          <li>\n            <label>Genres</label>\n            <p>{genresList}</p>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <p>More information</p>\n        <ul>\n          <li>\n            <Link\n              to={`/movies/${movieId}/cast`}\n              state={{ from: backFrom.current }}\n            >\n              --- Cast ---\n            </Link>\n          </li>\n          <li>\n            <Link\n              to={`/movies/${movieId}/reviews`}\n              state={{ from: backFrom.current }}\n            >\n              --- Reviews ---\n            </Link>\n          </li>\n        </ul>\n      </div>\n    </>\n  );\n};\n\nMovieDetails.propTypes = {\n  film: PropTypes.shape({\n    poster_path: PropTypes.string,\n    release_date: PropTypes.string.isRequired,\n    vote_average: PropTypes.number.isRequired,\n    genres: PropTypes.array.isRequired,\n    title: PropTypes.string.isRequired,\n    overview: PropTypes.string.isRequired,\n  }),\n  movieId: PropTypes.string.isRequired,\n  backFrom: PropTypes.object.isRequired,\n};\n","import { Suspense } from 'react';\nimport { Link, Outlet } from 'react-router-dom';\n// import { useState, useEffect, useRef } from 'react';\nimport { IoArrowBackOutline } from 'react-icons/io5';\n// import { fetchMovieDetails } from 'services/api';\nimport { MovieDetails } from 'components/MovieDetails/MovieDetails';\nimport { useFetchMovieDetails } from 'hooks/useFetchMovieDetails';\n\nconst MovieDetailsPage = () => {\n  //   const [film, setFilm] = useState(null);\n  //   const [error, setError] = useState(null);\n\n  //   const { movieId } = useParams();\n  //   const navigate = useNavigate();\n\n  //   const location = useLocation();\n  //   const backLinkHref = location.state?.from ?? '/';\n  //   const backFrom = useRef(backLinkHref);\n\n  //   useEffect(() => {\n  //     if (movieId === '') {\n  //       return;\n  //     }\n  //     const fetchData = async () => {\n  //       try {\n  //         const { data } = await fetchMovieDetails(movieId);\n  //         setFilm(data);\n  //       } catch (e) {\n  //         if (e.response.status === 404) {\n  //           return navigate(`/`);\n  //         }\n  //         setError(e.message);\n  //       }\n  //     };\n  //     fetchData();\n  //   }, [movieId, navigate]);\n\n  const { film, error, backLinkHref, movieId, backFrom } =\n    useFetchMovieDetails();\n\n  return (\n    <>\n      <Link to={backLinkHref}>\n        <IoArrowBackOutline />\n        Go back\n      </Link>\n      {error && <p>{error}</p>}\n      {film && (\n        <>\n          <MovieDetails film={film} movieId={movieId} backFrom={backFrom} />\n          <Suspense fallback={<div>Loading...</div>}>\n            <Outlet />\n          </Suspense>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default MovieDetailsPage;\n","import { useState, useEffect, useRef } from 'react';\nimport { fetchMovieDetails } from 'services/api';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\n\nexport const useFetchMovieDetails = () => {\n  const [film, setFilm] = useState(null);\n  const [error, setError] = useState(null);\n\n  const { movieId } = useParams();\n  const navigate = useNavigate();\n\n  const location = useLocation();\n  const backLinkHref = location.state?.from ?? '/';\n  const backFrom = useRef(backLinkHref);\n\n  useEffect(() => {\n    if (movieId === '') {\n      return;\n    }\n    const fetchData = async () => {\n      try {\n        const { data } = await fetchMovieDetails(movieId);\n        setFilm(data);\n      } catch (e) {\n        if (e.response.status === 404) {\n          return navigate(`/`);\n        }\n        setError(e.message);\n      }\n    };\n    fetchData();\n  }, [movieId, navigate]);\n\n  return { film, error, backLinkHref, movieId, backFrom };\n};\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '827cb17c4a19aaac58b5a69a05bdba2b';\n\n// Поиск по трендам самых популярных фильмов на сегодня для создания коллекции на главной странице.\nexport const fetchTrends = async () => {\n  return await axios.get(`trending/movie/day?api_key=${API_KEY}`);\n};\n\n// Поиск фильма по ключевому слову на странице фильмов\nexport const fetchMoviesBySearch = async name => {\n  return await axios.get(`search/movie?api_key=${API_KEY}&query=${name}`);\n};\n\n//  Поиск по ID - запрос полной информации о фильме для страницы кинофильма\nexport const fetchMovieDetails = async id => {\n  return await axios.get(`movie/${id}?api_key=${API_KEY}`);\n};\n\n// Запрос актеров\nexport const fetchCast = async id => {\n  return await axios.get(`movie/${id}/credits?api_key=${API_KEY}`);\n};\n\n// Запрос обзоров о фильме\nexport const fetchReviews = async id => {\n  return await axios.get(`movie/${id}/reviews?api_key=${API_KEY}`);\n};\n"],"names":["MovieDetails","film","poster_path","release_date","vote_average","genres","title","overview","movieId","backFrom","filmPoster","releaseDate","slice","userScore","toFixed","genresList","map","e","name","join","src","alt","width","height","Link","to","state","from","current","useState","setFilm","error","setError","useParams","navigate","useNavigate","backLinkHref","useLocation","useRef","useEffect","fetchData","fetchMovieDetails","data","response","status","message","useFetchMovieDetails","Suspense","fallback","axios","API_KEY","fetchTrends","fetchMoviesBySearch","id","fetchCast","fetchReviews"],"sourceRoot":""}